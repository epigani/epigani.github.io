<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Talks map</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css"/>
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css"/>
  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>

  <style>
    html, body { height:100%; margin:0; }
    #map { height:700px; width:100%; }
  </style>

  <script src="org-locations.js"></script> <!-- provides addressPoints (and optionally latlng) -->
</head>
<body>
  <div id="map"></div>
  <span>Mouse over a cluster to see the bounds of its children and click a cluster to zoom to those bounds</span>

  <script>
    const tiles = L.tileLayer(
      'https://cartodb-basemaps-a.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png',
      { maxZoom: 18, attribution: '&copy; OpenStreetMap contributors' }
    );
    const center = (typeof latlng !== 'undefined') ? latlng : [20, 0];
    const map = L.map('map', { center, zoom: 2, layers: [tiles] });

    const markers = L.markerClusterGroup({ showCoverageOnHover: true, maxClusterRadius: 80 });

    for (let i = 0; i < addressPoints.length; i++) {
      const [title, lat, lon] = addressPoints[i];
      const m = L.marker([lat, lon], { title });
      m.bindPopup(title);
      markers.addLayer(m);
    }
    map.addLayer(markers);
  </script>
</body>
</html>
